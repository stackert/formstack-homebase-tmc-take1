# Repo: https://github.com/formstack/web

## Disclaimer

Most of this documentation is generated by AI with the guidance of an Engineer. It is not intended to be accurate or complete. Its is only meant to give a general overview of how this piece fits into the larger ecosystem.

## Overview - Forms/Web (Backend) Core Controllers

Directory 'lib/Formstack'

1. **Core Business Logic**: This directory contains the main application endpoints and business logic, which is exactly what we want to document in an OpenAPI spec.

2. **Natural API Structure**: The controller names already give us a good organization structure for the API documentation, for example:

   - Forms API (`FormController`, `FormBuilderController`)
   - User Management (`UserController`, `UsersController`)
   - Submissions (`SubmissionsController`)
   - Authentication (`SessionController`)
   - Account Management (`AccountController`)

3. **Manageable Chunks**: We can tackle this systematically by:
   1. Starting with the core API controllers (likely in the `Api/` directory)
   2. Then documenting the most-used controllers based on file size/activity:
      - `FormController.php` (133KB)
      - `SubmissionsController.php` (136KB)
      - `PublicFormController.php` (108KB)
      - `FormBuilderController.php` (95KB)
   3. Following with smaller, more focused controllers

## Top Level controllers

**IMPORTANT** None of the material in this document is considered update nor accurate. This is a document to provide context regarding the Repo. **The Code is the Source of Truth**.

1. **Integration/** - Third-party service integrations

   - Handles various third-party service connections
   - Manages OAuth2 authentication for integrations
   - Key integrations include:
     - Webmerge document generation
     - Smartsheet integration
     - Generic OAuth2 integration handling
     - Data stashing/caching functionality

2. **Form/** - Core form rendering and view logic

   - Handles form display and rendering
   - Manages form views in different contexts (standard, workflow, portal)
   - Controls form analytics and sharing functionality
   - Primary focus on form presentation and interaction

3. **FormSettings/** - Form configuration and management
   - Comprehensive form configuration management
   - Controllers for different aspects:
     - Emails and Actions (notifications, webhooks)
     - Security settings (access control, encryption)
     - General settings (basics, metadata)
     - PDF generation settings
     - Plugin configurations
     - Welcome messages and form text

Let me continue checking the remaining directories:

Ran tool

Ran tool

Here's the expanded list with detailed descriptions:

1. **Integration/** - Third-party service integrations

   - Handles various third-party service connections
   - Manages OAuth2 authentication for integrations
   - Key integrations include Webmerge, Smartsheet
   - Generic OAuth2 integration handling

```
   GET  /integrations                         - List integrations
   POST /integrations/webmerge                - Webmerge setup
   POST /integrations/smartsheet              - Smartsheet connection
   GET  /integrations/oauth2/callback         - OAuth callbacks
```

2. **Form/** - Core form rendering and view logic

   - Handles form display and rendering
   - Manages form views in different contexts
   - Controls form analytics and sharing
   - Form presentation and interaction

```
   GET    /forms                                - List forms
   GET    /forms/dashboard                      - Dashboard view
   GET    /forms/{id}/builder                   - Form builder
   GET    /forms/{id}/analytics                 - Analytics
   GET    /forms/{id}/activity                  - Activity log
   POST   /forms/{id}/settings                  - Save settings
   GET    /forms/{id}/preview                   - Preview form
   GET    /forms/{formId}/view                  - View form
   GET    /forms/{formId}/workflow              - Workflow view
   GET    /forms/{formId}/portal                - Portal view
   GET    /forms/{formId}/analytics             - Analytics

```

3. **Api/** - (Step-child, noted to ignore)

   - V2 API implementation
   - QA endpoints

4. **FormSettings/** - Form configuration management

   - Email and action configurations
   - Security settings
   - General form settings
   - PDF generation
   - Plugin configurations
   - Form messaging

   ```
   GET  /forms/{formId}/settings/pdf          - PDF settings
   POST /forms/{formId}/settings/pdf/logo     - Upload PDF logo
   GET  /forms/{formId}/settings/security     - Security settings
   GET  /forms/{formId}/settings/emails       - Email configurations
   PUT  /forms/{formId}/settings/general      - Update general settings
   ```

5. **PrefillMapping/** - Form prefill functionality

   - Handles data mapping for form prefilling
   - Manages prefill configurations

6. **SmtpSettings/** - Email server configuration

   - SMTP server management
   - Email delivery settings
   - Single focused controller for SMTP configuration

```
   GET  /settings/smtp                       - SMTP settings
   PUT  /settings/smtp                       - Update SMTP config
```

7. **SmartList/** - Dynamic list management

   - Handles dynamic option lists
   - List configuration and management

8. **Scim/** - Identity management integration

   - SCIM protocol implementation
   - User provisioning
   - Group management
   - Resource types and schemas
   - Bulk operations

   ```
   GET    /scim/v2/ServiceProviderConfig     - SCIM configuration
   GET    /scim/v2/ResourceTypes            - Resource types
   GET    /scim/v2/Schemas                  - Schemas
   GET    /scim/v2/Users                    - Users
   GET    /scim/v2/Groups                   - Groups
   POST   /scim/v2/Bulk                     - Bulk operations
   ```

9. **Cpfs/** - Custom PDF Form Settings

   - PDF form customization
   - PDF generation settings

10. **Billing/** - Payment and subscription

    - Billing management
    - Subscription handling
    - Payment processing

```
   GET    /billing                          - Billing overview
   POST   /billing/subscribe                - New subscription
   PUT    /billing/update                   - Update billing
```

11. **Export/** - Data export functionality

    - Export configuration
    - Data format handling

12. **FormPlugin/** - Form extension system

    - Plugin management
    - Plugin configurations

13. **FormAuthentication/** - Form access control

    - Authentication methods
    - Access restrictions
    - Security policies

```
   GET    /forms/{formId}/auth              - Auth settings
   POST   /forms/{formId}/auth/configure    - Configure auth
```

14. **ApiKey/** - API authentication

    - API key management
    - API access control

    ```
    GET    /api/keys                         - List keys
    POST   /api/keys                         - Create key
    DELETE /api/keys/{id}                    - Delete key

    ```

15. **Iframe/** - Embedded form display

    - Facebook-specific integration
    - Embedded form handling

    ```
    GET    /iframe/facebook                 - Facebook app
    POST   /iframe/facebook/save            - Save FB settings
    ```

16. **Fsid/** - Formstack ID management
    - Identity management
    - Account linking

Each directory represents a distinct functional area of the application, with clear separation of concerns. Would you like me to dive deeper into any particular area?

```
    GET    /fsid/export/create/{organizationId}    - Create org export
    POST   /fsid/migration/status                  - Migration status
    GET    /fsid/subaccount                        - Subaccount info
    POST   /fsid/billing/migrate                   - Billing migration
```
